import{r as N,j as e,L as I,S as v}from"./app-uHmCJXjp.js";import{Q as b,S as B}from"./switch-B2sxwyQC.js";import{B as u}from"./logo-Qphi6ZG8.js";import{C as $,a as O,b as D,c as R,d as P}from"./card-CUf0X5yJ.js";import{u as L,a as M,F as U,b as i,c as o,d as l,e as d,f as c,s as V,o as y,g as G,h as H,i as m,j as z,k as J,l as _,m as C}from"./index-C2x7eBuz.js";import{I as x}from"./label-hhf_TJyc.js";import{A as Q}from"./app-layout-DMSJMHTn.js";import"./index-Dtgksd5Q.js";import"./tooltip-BTQc-XDf.js";import"./index-BnCxpXz4.js";import"./app-logo-icon-CWB9WgCs.js";const q=[{title:"Dashboard",href:"/dashboard"},{title:"Stages",href:"/stages"},{title:"Edit",href:"#"}],W=y({order:z.number().int().min(0,{message:"Order must be a positive number or zero."}),name:m().min(2,{message:"Name must be at least 2 characters."}),title:m().min(2,{message:"Title must be at least 2 characters."}),subtitle:m().optional(),description:m().optional(),email_subject:m().optional(),email_content:m().optional(),button_linking:H(y({text:m().min(1,{message:"Button text is required."}),popup:_([m().max(500),C("")]).optional(),status:_([m(),C("")]).optional(),replacing_text:J().optional()})).optional(),image:G().optional()});function ie({stage:n}){const r=L({resolver:V(W),defaultValues:{order:n.order,name:n.name,title:n.title,subtitle:n.subtitle||"",description:n.description||"",email_subject:n.email_subject||"",email_content:n.email_content||"",button_linking:typeof n.button_linking=="string"?JSON.parse(n.button_linking).map(t=>({...t,replacing_text:t.replacing_text??!1})):n.button_linking||[]}}),{fields:S,append:A,remove:w}=M({control:r.control,name:"button_linking"}),[g,k]=N.useState(!1),[E,f]=N.useState(null),F=t=>{var j;t.description==="<p><br></p>"&&(t.description=""),t.email_content==="<p><br></p>"&&(t.email_content="");const a=new FormData;a.append("_method","PUT"),a.append("order",t.order.toString()),a.append("name",t.name),a.append("title",t.title),a.append("subtitle",t.subtitle??""),a.append("description",t.description??""),a.append("email_subject",t.email_subject??""),a.append("email_content",t.email_content??""),t.button_linking&&t.button_linking.length>0?t.button_linking.forEach((p,h)=>{a.append(`button_linking[${h}][text]`,p.text),p.popup&&a.append(`button_linking[${h}][popup]`,p.popup),p.status&&a.append(`button_linking[${h}][status]`,p.status),a.append(`button_linking[${h}][replacing_text]`,(p.replacing_text||!1).toString())}):a.append("button_linking","");const s=document.getElementById("image");g?a.append("remove_image","true"):(j=s==null?void 0:s.files)!=null&&j[0]&&a.append("image",s.files[0]),v.post(route("stages.update",n.id),a,{forceFormData:!0})},T=t=>{if(t.target.files&&t.target.files[0]){const a=t.target.files[0],s=new FileReader;s.onloadend=()=>{f(s.result)},s.readAsDataURL(a),k(!1)}};return e.jsxs(Q,{breadcrumbs:q,children:[e.jsx(I,{title:`Edit Stage: ${n.name}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 bg-[#E6E6E6] p-4 text-[#0a0a0a] dark:bg-[#0a0a0a] dark:text-[#E6E6E6]",children:[e.jsxs($,{className:"bg-white dark:border-[#3E3E3A] dark:bg-[#121212]",children:[e.jsxs(O,{children:[e.jsx(D,{className:"text-xl font-bold",children:"Edit Stage"}),e.jsx(R,{className:"dark:text-gray-300",children:"Update stage information"})]}),e.jsx(P,{children:e.jsx(U,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(F),className:"space-y-4",encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(i,{control:r.control,name:"order",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Order"}),e.jsx(d,{children:e.jsx(x,{type:"number",placeholder:"0",...t,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:"name",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Name"}),e.jsx(d,{children:e.jsx(x,{placeholder:"Stage Name",...t,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})})]}),e.jsx(i,{control:r.control,name:"title",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Title"}),e.jsx(d,{children:e.jsx(x,{placeholder:"Stage Title",...t,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:"subtitle",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Subtitle (Optional)"}),e.jsx(d,{children:e.jsx(x,{placeholder:"Stage Subtitle",...t,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:"description",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Description (Optional)"}),e.jsx(d,{children:e.jsx(b,{name:t.name,value:t.value||"",onChange:a=>r.setValue("description",a),className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:placeholder:text-[#62605b]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:"email_subject",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{children:"Email Subject (Optional)"}),e.jsx(d,{children:e.jsx(x,{className:"border-[#3E3E3A]",placeholder:"Enter email subject",...t,value:t.value??""})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:"email_content",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{children:"Email Content (Optional)"}),e.jsx(d,{children:e.jsx(b,{name:t.name,value:t.value??"",onChange:a=>r.setValue("email_content",a),className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:placeholder:text-[#62605b]"})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Buttons (Optional)"}),S.map((t,a)=>e.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-md border p-4",children:[e.jsx(i,{control:r.control,name:`button_linking.${a}.text`,render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Button Text"}),e.jsx(d,{children:e.jsx(x,{placeholder:"Click Here",...s,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:`button_linking.${a}.popup`,render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Popup Content (Optional)"}),e.jsx(d,{children:e.jsx(b,{name:s.name,value:s.value||"",onChange:j=>r.setValue(`button_linking.${a}.popup`,j),className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:placeholder:text-[#62605b]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:`button_linking.${a}.status`,render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Status"}),e.jsx(d,{children:e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"border-[#3E3E3A]",placeholder:"null",list:"status-suggestions",...s}),e.jsx("datalist",{id:"status-suggestions",children:e.jsx("option",{value:"on hold"})})]})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:`button_linking.${a}.replacing_text`,render:({field:s})=>e.jsxs(o,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{className:"text-base",children:"Replacing Text"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable this to replace the button text dynamically"})]}),e.jsx(d,{children:e.jsx(B,{checked:s.value||!1,onCheckedChange:s.onChange})})]})}),e.jsx(u,{type:"button",variant:"destructive",onClick:()=>w(a),className:" w-1/4 justify-self-start",children:"Remove Button"})]},t.id)),e.jsx(u,{type:"button",variant:"outline",onClick:()=>A({text:"",popup:"",status:"",replacing_text:!1}),className:"border-[#3E3E3A] dark:text-[#E6E6E6] dark:hover:border-[#62605b] w-1/4 justify-self-start",children:"Add Button"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Image (Optional)"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[n.image&&!g&&!E?e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("p",{className:"mb-2 text-sm dark:text-gray-300",children:"Current Image:"})}),e.jsx("img",{src:`/storage/${n.image}`,alt:n.name,className:"max-h-[200px] rounded-md border border-[#3E3E3A]"}),e.jsx(u,{type:"button",variant:"destructive",onClick:()=>k(!0),className:"h-8 mt-2 px-3 text-xs",children:"Remove Image"})]}):E?e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"mb-2 text-sm dark:text-gray-300",children:"New Image Preview:"}),e.jsx(u,{type:"button",variant:"destructive",onClick:()=>{f(null);const t=document.getElementById("image");t&&(t.value="")},className:"h-8 px-3 text-xs",children:"Remove"})]}),e.jsx("img",{src:E,alt:"Preview",className:"max-h-[200px] rounded-md border border-[#3E3E3A]"})]}):null,e.jsx(x,{id:"image",type:"file",accept:"image/*",className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]",onChange:T}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Supported formats: JPG, PNG, GIF. Max size: 2MB."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>v.visit(route("stages.index")),className:"border-[#3E3E3A] dark:text-[#E6E6E6] dark:hover:border-[#62605b]",children:"Cancel"}),e.jsx(u,{type:"submit",className:"dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:hover:bg-[#2a2a2a]",children:"Update Stage"})]})]})})})]}),e.jsx("footer",{className:"mt-auto py-2 text-center text-lg text-gray-500 dark:text-gray-400 font-light font-roboto",children:"MADE WITH ❤️ BY -R&D-"})]})]})}export{ie as default};
