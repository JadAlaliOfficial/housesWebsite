import{r as A,j as e,L as C,S as h}from"./app-Btz77YcG.js";import{Q as b}from"./QuillEditor-DHbHydow.js";import{B as u}from"./logo-CRlyhS77.js";import{C as F,a as T,b as B,c as I,d as O}from"./card-DqBWZwMm.js";import{u as $,a as D,F as w,b as i,c as o,d as l,e as d,f as c,s as R,o as g,g as L,h as M,i as x,j as P,k,l as f}from"./index-CdrWDYOK.js";import{I as p}from"./label-C4o3Zs1T.js";import{A as V}from"./app-layout-CobFgu0Z.js";import"./index-CLBU_7LQ.js";import"./index-CA8lCId1.js";import"./index-RfMS4ZEi.js";import"./app-logo-icon-B5VV_wNc.js";const G=[{title:"Dashboard",href:"/dashboard"},{title:"Stages",href:"/stages"},{title:"Edit",href:"#"}],H=g({order:P.number().int().min(0,{message:"Order must be a positive number or zero."}),name:x().min(2,{message:"Name must be at least 2 characters."}),title:x().min(2,{message:"Title must be at least 2 characters."}),subtitle:x().optional(),description:x().optional(),email_subject:x().optional(),email_content:x().optional(),button_linking:M(g({text:x().min(1,{message:"Button text is required."}),popup:k([x().max(500),f("")]).optional(),status:k([x(),f("")]).optional()})).optional(),image:L().optional()});function te({stage:s}){const r=$({resolver:R(H),defaultValues:{order:s.order,name:s.name,title:s.title,subtitle:s.subtitle||"",description:s.description||"",email_subject:s.email_subject||"",email_content:s.email_content||"",button_linking:typeof s.button_linking=="string"?JSON.parse(s.button_linking):s.button_linking||[]}}),{fields:N,append:v,remove:y}=D({control:r.control,name:"button_linking"}),[E,_]=A.useState(!1),S=t=>{var m;t.description==="<p><br></p>"&&(t.description=""),t.email_content==="<p><br></p>"&&(t.email_content="");const a=new FormData;if(a.append("_method","PUT"),a.append("order",t.order.toString()),a.append("name",t.name),a.append("title",t.title),a.append("subtitle",t.subtitle??""),a.append("description",t.description??""),a.append("email_subject",t.email_subject??""),a.append("email_content",t.email_content??""),t.button_linking&&t.button_linking.length>0?t.button_linking.forEach((n,j)=>{a.append(`button_linking[${j}][text]`,n.text),n.popup&&a.append(`button_linking[${j}][popup]`,n.popup),n.status&&a.append(`button_linking[${j}][status]`,n.status)}):a.append("button_linking",""),E)a.append("image","");else{const n=document.getElementById("image");(m=n==null?void 0:n.files)!=null&&m[0]&&a.append("image",n.files[0])}h.post(route("stages.update",s.id),a,{forceFormData:!0})};return e.jsxs(V,{breadcrumbs:G,children:[e.jsx(C,{title:`Edit Stage: ${s.name}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 bg-[#E6E6E6] p-4 text-[#0a0a0a] dark:bg-[#0a0a0a] dark:text-[#E6E6E6]",children:[e.jsxs(F,{className:"bg-white dark:border-[#3E3E3A] dark:bg-[#121212]",children:[e.jsxs(T,{children:[e.jsx(B,{className:"text-xl font-bold",children:"Edit Stage"}),e.jsx(I,{className:"dark:text-gray-300",children:"Update stage information"})]}),e.jsx(O,{children:e.jsx(w,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(S),className:"space-y-4",encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(i,{control:r.control,name:"order",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Order"}),e.jsx(d,{children:e.jsx(p,{type:"number",placeholder:"0",...t,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:"name",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Name"}),e.jsx(d,{children:e.jsx(p,{placeholder:"Stage Name",...t,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})})]}),e.jsx(i,{control:r.control,name:"title",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Title"}),e.jsx(d,{children:e.jsx(p,{placeholder:"Stage Title",...t,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:"subtitle",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Subtitle (Optional)"}),e.jsx(d,{children:e.jsx(p,{placeholder:"Stage Subtitle",...t,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:"description",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Description (Optional)"}),e.jsx(d,{children:e.jsx(b,{name:t.name,value:t.value||"",onChange:a=>r.setValue("description",a),className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:placeholder:text-[#62605b]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:"email_subject",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{children:"Email Subject (Optional)"}),e.jsx(d,{children:e.jsx(p,{className:"border-[#3E3E3A]",placeholder:"Enter email subject",...t,value:t.value??""})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:"email_content",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{children:"Email Content (Optional)"}),e.jsx(d,{children:e.jsx(b,{name:t.name,value:t.value??"",onChange:a=>r.setValue("email_content",a),className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:placeholder:text-[#62605b]"})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Buttons (Optional)"}),N.map((t,a)=>e.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-md border p-4",children:[e.jsx(i,{control:r.control,name:`button_linking.${a}.text`,render:({field:m})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Button Text"}),e.jsx(d,{children:e.jsx(p,{placeholder:"Click Here",...m,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:`button_linking.${a}.popup`,render:({field:m})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Popup Content (Optional)"}),e.jsx(d,{children:e.jsx(b,{name:m.name,value:m.value||"",onChange:n=>r.setValue(`button_linking.${a}.popup`,n),className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:placeholder:text-[#62605b]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:`button_linking.${a}.status`,render:({field:m})=>e.jsxs(o,{children:[e.jsx(l,{children:"Status"}),e.jsx(d,{children:e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"border-[#3E3E3A]",placeholder:"null",list:"status-suggestions",...m}),e.jsx("datalist",{id:"status-suggestions",children:e.jsx("option",{value:"on hold"})})]})}),e.jsx(c,{})]})}),e.jsx(u,{type:"button",variant:"destructive",onClick:()=>y(a),className:" w-1/4 justify-self-start",children:"Remove Button"})]},t.id)),e.jsx(u,{type:"button",variant:"outline",onClick:()=>v({text:"",popup:"",status:""}),className:"border-[#3E3E3A] dark:text-[#E6E6E6] dark:hover:border-[#62605b] w-1/4 justify-self-start",children:"Add Button"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Image (Optional)"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[s.image&&!E&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("p",{className:"mb-2 text-sm dark:text-gray-300",children:"Current Image:"})}),e.jsx("img",{src:`/storage/${s.image}`,alt:s.name,className:"max-h-[200px] rounded-md border border-[#3E3E3A]"}),e.jsx(u,{type:"button",variant:"destructive",onClick:()=>_(!0),className:"h-8 mt-2 px-3 text-xs",children:"Remove Image"})]}),(E||!s.image)&&e.jsx(p,{id:"image",type:"file",accept:"image/*",className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Supported formats: JPG, PNG, GIF. Max size: 2MB."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>h.visit(route("stages.index")),className:"border-[#3E3E3A] dark:text-[#E6E6E6] dark:hover:border-[#62605b]",children:"Cancel"}),e.jsx(u,{type:"submit",className:"dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:hover:bg-[#2a2a2a]",children:"Update Stage"})]})]})})})]}),e.jsx("footer",{className:"mt-auto py-2 text-center text-lg text-gray-500 dark:text-gray-400 font-light font-roboto",children:"MADE WITH ❤️ BY -R&D-"})]})]})}export{te as default};
