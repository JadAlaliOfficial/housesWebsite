import{j as e,L as v,S as b}from"./app-g6xStyI4.js";import{Q as h}from"./QuillEditor-oMxOALxd.js";import{B as u}from"./logo-Bdv6mpv1.js";import{C,a as A,b as S,c as F,d as T}from"./card-CgNcqfCy.js";import{u as B,a as D,F as O,b as l,c as o,d as n,e as i,f as c,s as $,o as g,g as w,h as I,i as d,j as L,k as E,l as f}from"./index-CWFpKfNY.js";import{I as m}from"./label-DvPnnDnn.js";import{A as V}from"./app-layout-zH1BLb3D.js";import"./index-Gz8nKyFs.js";import"./index-CQTHTXn4.js";import"./index-CEogBx2M.js";import"./app-logo-icon-CWWgwLHC.js";const H=[{title:"Dashboard",href:"/dashboard"},{title:"Stages",href:"/stages"},{title:"Create",href:"/stages/create"}],R=g({order:L.number().int().min(0,{message:"Order must be a positive number or zero."}),name:d().min(2,{message:"Name must be at least 2 characters."}),title:d().min(2,{message:"Title must be at least 2 characters."}),subtitle:d().optional(),description:d().optional(),email_subject:d().optional(),email_content:d().optional(),button_linking:I(g({text:d().min(1,{message:"Button text is required."}),popup:E([d().max(500),f("")]).optional(),status:E([d(),f("")]).optional()})).optional(),image:w().optional()});function X(){const r=B({resolver:$(R),defaultValues:{order:0,name:"",title:"",subtitle:"",description:"",email_subject:"",email_content:"",button_linking:[]}}),{fields:k,append:_,remove:y}=D({control:r.control,name:"button_linking"}),N=t=>{var x;t.description==="<p><br></p>"&&(t.description=""),t.email_content==="<p><br></p>"&&(t.email_content=""),t.button_linking&&t.button_linking.length>0&&(t.button_linking=t.button_linking.map(p=>p.popup==="<p><br></p>"?{...p,popup:""}:p));const s=new FormData;s.append("order",t.order.toString()),s.append("name",t.name),s.append("title",t.title),s.append("subtitle",t.subtitle??""),s.append("description",t.description??""),s.append("email_subject",t.email_subject??""),s.append("email_content",t.email_content??""),t.button_linking&&t.button_linking.length>0?t.button_linking.forEach((p,j)=>{s.append(`button_linking[${j}][text]`,p.text),s.append(`button_linking[${j}][popup]`,p.popup??""),p.status&&s.append(`button_linking[${j}][status]`,p.status)}):s.append("button_linking","");const a=document.getElementById("image");(x=a==null?void 0:a.files)!=null&&x[0]&&s.append("image",a.files[0]),b.post(route("stages.store"),s,{forceFormData:!0})};return e.jsxs(V,{breadcrumbs:H,children:[e.jsx(v,{title:"Create Stage"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 bg-[#E6E6E6] p-4 text-[#0a0a0a] dark:bg-[#0a0a0a] dark:text-[#E6E6E6]",children:[e.jsxs(C,{className:"bg-white border-[#3E3E3A] dark:bg-[#121212]",children:[e.jsxs(A,{children:[e.jsx(S,{className:"text-xl font-bold",children:"Create New Stage"}),e.jsx(F,{className:"dark:text-gray-300",children:"Add a new stage to the house building process"})]}),e.jsx(T,{children:e.jsx(O,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(N),className:"space-y-4",encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(l,{control:r.control,name:"order",render:({field:t})=>e.jsxs(o,{children:[e.jsx(n,{children:"Order"}),e.jsx(i,{children:e.jsx(m,{className:"border-[#3E3E3A]",type:"number",placeholder:"0",...t})}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"name",render:({field:t})=>e.jsxs(o,{children:[e.jsx(n,{children:"Name"}),e.jsx(i,{children:e.jsx(m,{className:"border-[#3E3E3A]",placeholder:"Stage Name",...t})}),e.jsx(c,{})]})})]}),e.jsx(l,{control:r.control,name:"title",render:({field:t})=>e.jsxs(o,{children:[e.jsx(n,{children:"Title"}),e.jsx(i,{children:e.jsx(m,{className:"border-[#3E3E3A]",placeholder:"Stage Title",...t})}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"subtitle",render:({field:t})=>e.jsxs(o,{children:[e.jsx(n,{children:"Subtitle (Optional)"}),e.jsx(i,{children:e.jsx(m,{className:"border-[#3E3E3A]",placeholder:"Stage Subtitle",...t})}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"description",render:({field:t})=>e.jsxs(o,{children:[e.jsx(n,{children:"Description (Optional)"}),e.jsx(i,{children:e.jsx(h,{name:t.name,value:t.value||"",onChange:s=>r.setValue("description",s),className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:placeholder:text-[#62605b]"})}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"email_subject",render:({field:t})=>e.jsxs(o,{children:[e.jsx(n,{children:"Email Subject (Optional)"}),e.jsx(i,{children:e.jsx(m,{className:"border-[#3E3E3A]",placeholder:"Enter email subject",...t,value:t.value??""})}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"email_content",render:({field:t})=>e.jsxs(o,{children:[e.jsx(n,{children:"Email Content (Optional)"}),e.jsx(i,{children:e.jsx(h,{name:t.name,value:t.value??"",onChange:s=>r.setValue("email_content",s),className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:placeholder:text-[#62605b]"})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(n,{children:"Buttons (Optional)"}),k.map((t,s)=>e.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-md border p-4",children:[e.jsx(l,{control:r.control,name:`button_linking.${s}.text`,render:({field:a})=>e.jsxs(o,{children:[e.jsx(n,{children:"Button Text"}),e.jsx(i,{children:e.jsx(m,{className:"border-[#3E3E3A]",placeholder:"Click Here",...a})}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:`button_linking.${s}.popup`,render:({field:a})=>e.jsxs(o,{children:[e.jsx(n,{children:"Popup Content"}),e.jsx(i,{children:e.jsx(h,{name:a.name,value:a.value||"",onChange:x=>r.setValue(`button_linking.${s}.popup`,x),className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:placeholder:text-[#62605b]"})}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:`button_linking.${s}.status`,render:({field:a})=>e.jsxs(o,{children:[e.jsx(n,{children:"Status"}),e.jsx(i,{children:e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"border-[#3E3E3A]",placeholder:"null",list:"status-suggestions",...a}),e.jsx("datalist",{id:"status-suggestions",children:e.jsx("option",{value:"on hold"})})]})}),e.jsx(c,{})]})}),e.jsx(u,{type:"button",variant:"destructive",onClick:()=>y(s),className:"w-1/4 justify-self-start ",children:"Remove Button"})]},t.id)),e.jsx(u,{type:"button",variant:"outline",className:"border-[#3E3E3A] dark:text-[#E6E6E6] dark:hover:border-[#62605b] w-1/4 justify-self-start",onClick:()=>_({text:"",popup:"",status:""}),children:"Add Button"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Image (Optional)"}),e.jsx(m,{className:"border-[#3E3E3A]",id:"image",type:"file",accept:"image/*"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>b.visit(route("stages.index")),children:"Cancel"}),e.jsx(u,{type:"submit",children:"Create Stage"})]})]})})})]}),e.jsx("footer",{className:"mt-auto py-2 text-center text-lg text-gray-500 dark:text-gray-400 font-light font-roboto",children:"MADE WITH ❤️ BY -R&D-"})]})]})}export{X as default};
