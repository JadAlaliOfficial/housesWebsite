import{r as N,j as e,L as w,S as v}from"./app-Cn9ebUPR.js";import{Q as h}from"./QuillEditor-D-CL5qrM.js";import{B as p}from"./logo-Dol5N1JW.js";import{C as B,a as O,b as D,c as $,d as P}from"./card-D71G8Tr3.js";import{u as R,a as L,F as M,b as i,c as o,d as l,e as d,f as c,s as U,o as y,g as V,h as G,i as m,j as H,k as _,l as C}from"./index-BIZiMmDc.js";import{I as x}from"./label-BV2aYMb4.js";import{A as z}from"./app-layout-MQeqHnCL.js";import"./index-BU9fzGBo.js";import"./tooltip-ptfXStLB.js";import"./index-84p99jev.js";import"./app-logo-icon-QXxVdf10.js";const J=[{title:"Dashboard",href:"/dashboard"},{title:"Stages",href:"/stages"},{title:"Edit",href:"#"}],Q=y({order:H.number().int().min(0,{message:"Order must be a positive number or zero."}),name:m().min(2,{message:"Name must be at least 2 characters."}),title:m().min(2,{message:"Title must be at least 2 characters."}),subtitle:m().optional(),description:m().optional(),email_subject:m().optional(),email_content:m().optional(),button_linking:G(y({text:m().min(1,{message:"Button text is required."}),popup:_([m().max(500),C("")]).optional(),status:_([m(),C("")]).optional()})).optional(),image:V().optional()});function ne({stage:r}){const s=R({resolver:U(Q),defaultValues:{order:r.order,name:r.name,title:r.title,subtitle:r.subtitle||"",description:r.description||"",email_subject:r.email_subject||"",email_content:r.email_content||"",button_linking:typeof r.button_linking=="string"?JSON.parse(r.button_linking):r.button_linking||[]}}),{fields:S,append:A,remove:F}=L({control:s.control,name:"button_linking"}),[g,k]=N.useState(!1),[E,f]=N.useState(null),I=t=>{var j;t.description==="<p><br></p>"&&(t.description=""),t.email_content==="<p><br></p>"&&(t.email_content="");const a=new FormData;a.append("_method","PUT"),a.append("order",t.order.toString()),a.append("name",t.name),a.append("title",t.title),a.append("subtitle",t.subtitle??""),a.append("description",t.description??""),a.append("email_subject",t.email_subject??""),a.append("email_content",t.email_content??""),t.button_linking&&t.button_linking.length>0?t.button_linking.forEach((u,b)=>{a.append(`button_linking[${b}][text]`,u.text),u.popup&&a.append(`button_linking[${b}][popup]`,u.popup),u.status&&a.append(`button_linking[${b}][status]`,u.status)}):a.append("button_linking","");const n=document.getElementById("image");g?a.append("remove_image","true"):(j=n==null?void 0:n.files)!=null&&j[0]&&a.append("image",n.files[0]),v.post(route("stages.update",r.id),a,{forceFormData:!0})},T=t=>{if(t.target.files&&t.target.files[0]){const a=t.target.files[0],n=new FileReader;n.onloadend=()=>{f(n.result)},n.readAsDataURL(a),k(!1)}};return e.jsxs(z,{breadcrumbs:J,children:[e.jsx(w,{title:`Edit Stage: ${r.name}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 bg-[#E6E6E6] p-4 text-[#0a0a0a] dark:bg-[#0a0a0a] dark:text-[#E6E6E6]",children:[e.jsxs(B,{className:"bg-white dark:border-[#3E3E3A] dark:bg-[#121212]",children:[e.jsxs(O,{children:[e.jsx(D,{className:"text-xl font-bold",children:"Edit Stage"}),e.jsx($,{className:"dark:text-gray-300",children:"Update stage information"})]}),e.jsx(P,{children:e.jsx(M,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(I),className:"space-y-4",encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(i,{control:s.control,name:"order",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Order"}),e.jsx(d,{children:e.jsx(x,{type:"number",placeholder:"0",...t,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:s.control,name:"name",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Name"}),e.jsx(d,{children:e.jsx(x,{placeholder:"Stage Name",...t,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})})]}),e.jsx(i,{control:s.control,name:"title",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Title"}),e.jsx(d,{children:e.jsx(x,{placeholder:"Stage Title",...t,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:s.control,name:"subtitle",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Subtitle (Optional)"}),e.jsx(d,{children:e.jsx(x,{placeholder:"Stage Subtitle",...t,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:s.control,name:"description",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Description (Optional)"}),e.jsx(d,{children:e.jsx(h,{name:t.name,value:t.value||"",onChange:a=>s.setValue("description",a),className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:placeholder:text-[#62605b]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:s.control,name:"email_subject",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{children:"Email Subject (Optional)"}),e.jsx(d,{children:e.jsx(x,{className:"border-[#3E3E3A]",placeholder:"Enter email subject",...t,value:t.value??""})}),e.jsx(c,{})]})}),e.jsx(i,{control:s.control,name:"email_content",render:({field:t})=>e.jsxs(o,{children:[e.jsx(l,{children:"Email Content (Optional)"}),e.jsx(d,{children:e.jsx(h,{name:t.name,value:t.value??"",onChange:a=>s.setValue("email_content",a),className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:placeholder:text-[#62605b]"})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Buttons (Optional)"}),S.map((t,a)=>e.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-md border p-4",children:[e.jsx(i,{control:s.control,name:`button_linking.${a}.text`,render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Button Text"}),e.jsx(d,{children:e.jsx(x,{placeholder:"Click Here",...n,className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:s.control,name:`button_linking.${a}.popup`,render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Popup Content (Optional)"}),e.jsx(d,{children:e.jsx(h,{name:n.name,value:n.value||"",onChange:j=>s.setValue(`button_linking.${a}.popup`,j),className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:placeholder:text-[#62605b]"})}),e.jsx(c,{})]})}),e.jsx(i,{control:s.control,name:`button_linking.${a}.status`,render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{children:"Status"}),e.jsx(d,{children:e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"border-[#3E3E3A]",placeholder:"null",list:"status-suggestions",...n}),e.jsx("datalist",{id:"status-suggestions",children:e.jsx("option",{value:"on hold"})})]})}),e.jsx(c,{})]})}),e.jsx(p,{type:"button",variant:"destructive",onClick:()=>F(a),className:" w-1/4 justify-self-start",children:"Remove Button"})]},t.id)),e.jsx(p,{type:"button",variant:"outline",onClick:()=>A({text:"",popup:"",status:""}),className:"border-[#3E3E3A] dark:text-[#E6E6E6] dark:hover:border-[#62605b] w-1/4 justify-self-start",children:"Add Button"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:"dark:text-[#E6E6E6]",children:"Image (Optional)"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[r.image&&!g&&!E?e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("p",{className:"mb-2 text-sm dark:text-gray-300",children:"Current Image:"})}),e.jsx("img",{src:`/storage/${r.image}`,alt:r.name,className:"max-h-[200px] rounded-md border border-[#3E3E3A]"}),e.jsx(p,{type:"button",variant:"destructive",onClick:()=>k(!0),className:"h-8 mt-2 px-3 text-xs",children:"Remove Image"})]}):E?e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"mb-2 text-sm dark:text-gray-300",children:"New Image Preview:"}),e.jsx(p,{type:"button",variant:"destructive",onClick:()=>{f(null);const t=document.getElementById("image");t&&(t.value="")},className:"h-8 px-3 text-xs",children:"Remove"})]}),e.jsx("img",{src:E,alt:"Preview",className:"max-h-[200px] rounded-md border border-[#3E3E3A]"})]}):null,e.jsx(x,{id:"image",type:"file",accept:"image/*",className:"border-[#3E3E3A] dark:bg-[#1a1a1a] dark:text-[#E6E6E6]",onChange:T}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Supported formats: JPG, PNG, GIF. Max size: 2MB."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>v.visit(route("stages.index")),className:"border-[#3E3E3A] dark:text-[#E6E6E6] dark:hover:border-[#62605b]",children:"Cancel"}),e.jsx(p,{type:"submit",className:"dark:bg-[#1a1a1a] dark:text-[#E6E6E6] dark:hover:bg-[#2a2a2a]",children:"Update Stage"})]})]})})})]}),e.jsx("footer",{className:"mt-auto py-2 text-center text-lg text-gray-500 dark:text-gray-400 font-light font-roboto",children:"MADE WITH ❤️ BY -R&D-"})]})]})}export{ne as default};
